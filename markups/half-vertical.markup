<!-- TRMNL Plugin: OpenRouter Credits - HALF HORIZONTAL (800Ã—240px) -->
<!-- Data format: { "data": { "total_usage": 0.01946013, "total_credits": 10 } } -->
<!-- Emojis: ğŸ”¥â­ when >9 credits, ğŸ’© when 0 credits, ğŸ¦ DRAMATIC when in debt -->

{% if data.total_usage > data.total_credits %}
<!-- DRAMATIC DEBT MODE -->
<div class="layout layout--col layout--center gap">
    <div class="flex flex--center gap">
        <span class="value value--xxxlarge">ğŸ¦</span>
        <div class="layout layout--col">
            <span class="title">YOU OWE THE BANK!</span>
            <span class="label label--gray"
                >Used ${{ data.total_usage | round: 2 }} â€¢ Have {{
                data.total_credits }} credits</span
            >
        </div>
    </div>
</div>
{% else %}
<!-- NORMAL MODE -->
<div class="layout layout--col gap">
    <!-- Header -->
    <div class="flex flex--center gap--small">
        <span class="value value--small">â­</span>
        <span class="title title--small">OpenRouter Free Credits</span>
        <span class="value value--small">â­</span>
    </div>

    <!-- Stats Grid -->
    <div class="grid grid--cols-2 gap">
        <!-- Total Usage -->
        <div class="item">
            <div class="meta"></div>
            <div class="content">
                <span class="value value--xlarge value--tnums"
                    >${{ data.total_usage | round: 2 }}</span
                >
                <span class="label label--small">Usage</span>
            </div>
        </div>

        <!-- Credits Remaining with Emoji -->
        <div class="item item--emphasis-3">
            <div class="meta"></div>
            <div class="content">
                <div class="flex flex--center gap--small">
                    <span class="value value--xlarge value--tnums"
                        >{{ data.total_credits }}</span
                    >
                    {% if data.total_credits > 9 %} {% assign emojis = "ğŸ”¥,â­" |
                    split: "," %} {% assign random_index = "now" | date: "%N" |
                    modulo: 2 %}
                    <span class="value value--large"
                        >{{ emojis[random_index] }}</span
                    >
                    {% elsif data.total_credits == 0 %}
                    <span class="value value--large">ğŸ’©</span>
                    {% endif %}
                </div>
                <span class="label label--small">Credits</span>
            </div>
        </div>
    </div>
</div>
{% endif %}

<div class="title_bar">
    <img class="image" src="/images/plugins/trmnl--render.svg" />
    <span class="title">OpenRouter</span>
    <span class="instance">Free Tier</span>
</div>
